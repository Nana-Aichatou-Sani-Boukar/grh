<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{template}"
>
  <head>
    <meta charset="UTF-8" />
    <title>Services</title>
  </head>
  <body>
    <div layout:fragment="content">
      <div class="container-fluid">
        <!-- Affichage du message flash -->
        <div
          th:if="${not #strings.isEmpty(message)}"
          class="alert"
          th:classappend="${alertClass}"
          role="alert"
        >
          <span th:text="${message}"></span>
        </div>
        <!-- start page title -->
        <div class="row">
          <div class="col-12">
            <div
              class="page-title-box d-sm-flex align-items-center justify-content-between"
            >
              <h4 class="mb-sm-0">Gestion des utilisateurs</h4>
              <div class="page-title-right">
                <ol class="breadcrumb m-0">
                  <li class="breadcrumb-item">
                    <a href="javascript: void(0);">Configuration</a>
                  </li>
                  <li class="breadcrumb-item active">Gestion des services</li>
                </ol>
              </div>
            </div>
          </div>
        </div>
        <!-- end page title -->
        <div class="row">
          <div class="col-lg-12">
            <div class="card" id="invoiceList">
              <div class="card-header border-0">
                <div class="d-flex align-items-center">
                  <h5 class="card-title mb-0 flex-grow-1">Listing des services</h5>
                  <div class="flex-shrink-0">
                    <div class="d-flex gap-2 flex-wrap">
                      <button
                        type="button"
                        class="btn btn-primary"
                        data-bs-toggle="modal"
                        data-bs-target="#primary-header-modal"
                        >
                        <i class="ri-add-line align-bottom me-1"></i>Nouveau service
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div
                id="primary-header-modal"
                class="modal fade"
                tabindex="-1"
                role="dialog"
                aria-labelledby="primary-header-modalLabel"
                aria-hidden="true"
                >
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <!-- Modal header -->
                    <div class="modal-header bg-primary text-white">
                      <h5
                        class="modal-title text-white"
                        id="modalLabelCreateEvents"
                      >
                        Nouveau service
                      </h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      <form
                        action="user_consulter.php"
                        method="post"
                        autocomplete="off"
                        class="row g-3 needs-validation"
                        novalidate
                      >
                        <div class="col-md-6">
                          <label class="form-label">Nom<span class="text-danger">*</span>
                          </label>
                          <input
                            type="text"
                            name="nom"
                            class="form-control"
                            placeholder="Entrer le nom"
                            required
                          />
                        </div>
                        <!-- <div class="col-md-6">
                          <label class="form-label"
                            >Prenom<span class="text-danger">*</span></label
                          >
                          <input
                            type="text"
                            name="prenom"
                            class="form-control"
                            placeholder="Entrer le prenom"
                            required
                          />
                        </div>
                        <div class="col-md-6">
                          <label class="form-label"
                            >Login<span class="text-danger">*</span></label
                          >
                          <input
                            type="text"
                            name="login"
                            class="form-control"
                            placeholder="Entrer le login"
                            required
                          />
                        </div>
                        <div class="col-md-6">
                          <label for="password" class="form-label"
                            >Mot de passe<span class="text-danger"
                              >*</span
                            ></label
                          >
                          <input
                            type="password"
                            name="password"
                            class="form-control"
                            id="password"
                            value=""
                            required
                          />
                        </div>
                        <div class="col-md-6 mb-3">
                          <label for="confirmation" class="form-label"
                            >Confirmation<span class="text-danger"
                              >*</span
                            ></label
                          >
                          <input
                            type="password"
                            name="password2"
                            class="form-control"
                            id="confirmation"
                            value=""
                            required
                          />
                        </div> -->
                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                          >
                            Fermer
                          </button>
                          <button
                            type="submit"
                            class="btn btn-primary"
                            name="bouton_envoyer"
                            value="bouton_envoyer"
                          >
                            Valider
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <!-- /.modal-dialog -->
              </div>
              <!-- /.modal -->
              <div
                class="card-body bg-soft-light border border-dashed border-start-0 border-end-0"
              >
                <form method="get" th:action="@{/services}">
                  <div class="row g-3">
                    <div class="col-xxl-3 col-sm-4">
                      <input
                        type="text"
                        class="form-control bg-light border-light"
                        name="keyword"
                        th:value="${keyword}"
                        placeholder="Entrez le mot clé"
                      />
                    </div>
                    <!--end col-->
                    <div class="col-xxl-1 col-sm-4">
                      <button
                        id="btn_search"
                        type="button"
                        class="btn btn-primary w-100"
                      >
                        <i class="ri-equalizer-fill me-1 align-bottom"></i>
                        Filtrer
                      </button>
                    </div>
                    <!--end col-->
                  </div>
                  <!--end row-->
                </form>
              </div>
              <div class="card-body">
                <div class="table-responsive table-card">
                  <table class="table align-middle table-nowrap">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>Libellé</th>
                        <th>Direction</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr th:each="s : ${listServices}">
                        <td th:text="${s.id}"></td>
                        <td th:text="${s.libelle}"></td>
                        <td th:text="${s.direction.libelle}"></td>
                        <td>
                          <a
                            onclick="return confirm('Êtes-vous sûr?')"
                            class="btn btn-danger"
                            th:href="@{deleteService(id=${s.id}, keyword=${keyword}, page=${currentPage})}"
                          >
                            <i class="ri-close-fill"></i>
                          </a>
                        </td>
                        <td>
                          <a
                            class="btn btn-primary"
                            th:href="@{editService(id=${s.id})}"
                          >
                            <i class="ri-pencil-fill"></i>
                          </a>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <div class="d-flex justify-content-end mt-3">
                  <div class="pagination-wrap hstack gap-2">
                    <ul class="pagination listjs-pagination mb-0">
                      <li th:each="page, status : ${pages}">
                        <a
                          th:class="${status.index == currentPage ? 'btn btn-info ms-1' : 'btn btn-outline-info ms-1'}"
                          th:href="@{/services(page=${status.index}, keyword=${keyword})}"
                          th:text="${status.index}"
                        >
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--end col-->
        </div>
        <!--end row-->
      </div>
    </div>
  </body>
</html>
